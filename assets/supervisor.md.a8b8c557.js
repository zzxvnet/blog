import{_ as s,o as a,c as e,O as o}from"./chunks/framework.ef0174de.js";const C=JSON.parse('{"title":"在 CentOS 7 上安装 Supervisor：","description":"","frontmatter":{},"headers":[],"relativePath":"supervisor.md","filePath":"supervisor.md"}'),r={name:"supervisor.md"},n=o(`<h1 id="在-centos-7-上安装-supervisor" tabindex="-1">在 CentOS 7 上安装 Supervisor： <a class="header-anchor" href="#在-centos-7-上安装-supervisor" aria-label="Permalink to &quot;在 CentOS 7 上安装 Supervisor：&quot;">​</a></h1><h2 id="_1-安装epel-extra-packages-for-enterprise-linux-源" tabindex="-1">1.安装EPEL（Extra Packages for Enterprise Linux）源： <a class="header-anchor" href="#_1-安装epel-extra-packages-for-enterprise-linux-源" aria-label="Permalink to &quot;1.安装EPEL（Extra Packages for Enterprise Linux）源：&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">yum install epel-release</span></span></code></pre></div><h2 id="_2-使用-yum安装-supervisor" tabindex="-1">2.使用 yum安装 Supervisor： <a class="header-anchor" href="#_2-使用-yum安装-supervisor" aria-label="Permalink to &quot;2.使用 yum安装 Supervisor：&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">yum install -y supervisor</span></span></code></pre></div><h2 id="_3-启用supervisor的自启动" tabindex="-1">3.启用Supervisor的自启动： <a class="header-anchor" href="#_3-启用supervisor的自启动" aria-label="Permalink to &quot;3.启用Supervisor的自启动：&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl enable supervisord</span></span></code></pre></div><h2 id="_4-启动-supervisor-服务" tabindex="-1">4.启动 Supervisor 服务： <a class="header-anchor" href="#_4-启动-supervisor-服务" aria-label="Permalink to &quot;4.启动 Supervisor 服务：&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl start supervisord</span></span></code></pre></div><h2 id="_5-确认-supervisor-是否已经启动" tabindex="-1">5.确认 Supervisor 是否已经启动： <a class="header-anchor" href="#_5-确认-supervisor-是否已经启动" aria-label="Permalink to &quot;5.确认 Supervisor 是否已经启动：&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl status supervisord</span></span></code></pre></div><p>现在，您已经成功地在 CentOS 7 上安装和启动了 Supervisor。</p><h2 id="_6-重启-supervisord-服务-使用以下命令" tabindex="-1">6.重启 supervisord 服务，使用以下命令： <a class="header-anchor" href="#_6-重启-supervisord-服务-使用以下命令" aria-label="Permalink to &quot;6.重启 supervisord 服务，使用以下命令：&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl restart supervisord</span></span></code></pre></div><h2 id="_7-如果-supervisord-服务已经在运行-则使用以下命令重启所有的程序" tabindex="-1">7.如果 supervisord 服务已经在运行，则使用以下命令重启所有的程序： <a class="header-anchor" href="#_7-如果-supervisord-服务已经在运行-则使用以下命令重启所有的程序" aria-label="Permalink to &quot;7.如果 supervisord 服务已经在运行，则使用以下命令重启所有的程序：&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sudo supervisorctl restart all</span></span></code></pre></div><h2 id="_8-检查是否有supervisor进程运行" tabindex="-1">8.检查是否有Supervisor进程运行： <a class="header-anchor" href="#_8-检查是否有supervisor进程运行" aria-label="Permalink to &quot;8.检查是否有Supervisor进程运行：&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ps -ef | grep supervisord</span></span></code></pre></div><h2 id="_9-新增队列" tabindex="-1">9.新增队列 <a class="header-anchor" href="#_9-新增队列" aria-label="Permalink to &quot;9.新增队列&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">[program:v2board]</span></span>
<span class="line"><span style="color:#A6ACCD;">command=php artisan horizon</span></span>
<span class="line"><span style="color:#A6ACCD;">process_name=%(program_name)s_%(process_num)02d</span></span>
<span class="line"><span style="color:#A6ACCD;">numprocs=1</span></span>
<span class="line"><span style="color:#A6ACCD;">directory=/home/wwwroot/zzxvhub</span></span>
<span class="line"><span style="color:#A6ACCD;">autostart=true</span></span>
<span class="line"><span style="color:#A6ACCD;">autorestart=true</span></span>
<span class="line"><span style="color:#A6ACCD;">user=www</span></span>
<span class="line"><span style="color:#A6ACCD;">redirect_stderr=true</span></span>
<span class="line"><span style="color:#A6ACCD;">stdout_logfile=/var/log/v2board.log</span></span></code></pre></div><h2 id="_10-查看supervisor-conf语法是否错误" tabindex="-1">10.查看supervisor.conf语法是否错误 <a class="header-anchor" href="#_10-查看supervisor-conf语法是否错误" aria-label="Permalink to &quot;10.查看supervisor.conf语法是否错误&quot;">​</a></h2><h3 id="如果出现以下错误" tabindex="-1">如果出现以下错误 <a class="header-anchor" href="#如果出现以下错误" aria-label="Permalink to &quot;如果出现以下错误&quot;">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# sudo supervisorctl status v2board</span></span>
<span class="line"><span style="color:#A6ACCD;">v2board: ERROR (no such process)</span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# </span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# sudo systemctl start supervisord</span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# sudo systemctl restart supervisord</span></span>
<span class="line"><span style="color:#A6ACCD;">Job for supervisord.service failed because the control process exited with error code. See &quot;systemctl status supervisord.service&quot; and &quot;journalctl -xe&quot; for details.</span></span></code></pre></div><h3 id="检查-supervisord-配置文件的语法是否正确-可以运行-supervisord-c-etc-supervisord-conf-n-命令进行语法检查。" tabindex="-1">检查 supervisord 配置文件的语法是否正确，可以运行 supervisord -c /etc/supervisord.conf -n 命令进行语法检查。 <a class="header-anchor" href="#检查-supervisord-配置文件的语法是否正确-可以运行-supervisord-c-etc-supervisord-conf-n-命令进行语法检查。" aria-label="Permalink to &quot;检查 supervisord 配置文件的语法是否正确，可以运行 supervisord -c /etc/supervisord.conf -n 命令进行语法检查。&quot;">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">supervisord -c /etc/supervisord.conf -n</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# supervisord -c /etc/supervisord.conf -n</span></span>
<span class="line"><span style="color:#A6ACCD;">Error: Invalid user name www in section &#39;program:v2board&#39; (file: &#39;/etc/supervisord.d/v2board.ini&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;">For help, use /usr/bin/supervisord -h</span></span></code></pre></div><h3 id="根据您提供的信息-supervisord启动时提示v2board程序中存在无效的用户名-www-。您需要编辑v2board的配置文件-etc-supervisord-d-v2board-ini-检查是否正确设置了用户名。检查后-您可以再次尝试启动supervisord。" tabindex="-1">根据您提供的信息，supervisord启动时提示v2board程序中存在无效的用户名“www”。您需要编辑v2board的配置文件（/etc/supervisord.d/v2board.ini），检查是否正确设置了用户名。检查后，您可以再次尝试启动supervisord。 <a class="header-anchor" href="#根据您提供的信息-supervisord启动时提示v2board程序中存在无效的用户名-www-。您需要编辑v2board的配置文件-etc-supervisord-d-v2board-ini-检查是否正确设置了用户名。检查后-您可以再次尝试启动supervisord。" aria-label="Permalink to &quot;根据您提供的信息，supervisord启动时提示v2board程序中存在无效的用户名“www”。您需要编辑v2board的配置文件（/etc/supervisord.d/v2board.ini），检查是否正确设置了用户名。检查后，您可以再次尝试启动supervisord。&quot;">​</a></h3><h3 id="使用www用户运行v2board-则需要在系统中创建该用户。您可以使用以下命令创建www用户并设置密码" tabindex="-1">使用www用户运行v2board，则需要在系统中创建该用户。您可以使用以下命令创建www用户并设置密码： <a class="header-anchor" href="#使用www用户运行v2board-则需要在系统中创建该用户。您可以使用以下命令创建www用户并设置密码" aria-label="Permalink to &quot;使用www用户运行v2board，则需要在系统中创建该用户。您可以使用以下命令创建www用户并设置密码：&quot;">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sudo useradd -m -s /bin/bash www</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo passwd www</span></span></code></pre></div><h3 id="在上面的命令中-m选项创建用户的主目录-s选项设置用户的默认shell。然后-您可以将-program-v2board-节中的user键设置为www-重新启动supervisord服务以使更改生效。" tabindex="-1">在上面的命令中，-m选项创建用户的主目录，-s选项设置用户的默认shell。然后，您可以将[program:v2board]节中的user键设置为www，重新启动supervisord服务以使更改生效。 <a class="header-anchor" href="#在上面的命令中-m选项创建用户的主目录-s选项设置用户的默认shell。然后-您可以将-program-v2board-节中的user键设置为www-重新启动supervisord服务以使更改生效。" aria-label="Permalink to &quot;在上面的命令中，-m选项创建用户的主目录，-s选项设置用户的默认shell。然后，您可以将[program:v2board]节中的user键设置为www，重新启动supervisord服务以使更改生效。&quot;">​</a></h3><h3 id="交互如下" tabindex="-1">交互如下 <a class="header-anchor" href="#交互如下" aria-label="Permalink to &quot;交互如下&quot;">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# </span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# sudo systemctl start supervisord</span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# sudo systemctl restart supervisord</span></span>
<span class="line"><span style="color:#A6ACCD;">Job for supervisord.service failed because the control process exited with error code. See &quot;systemctl status supervisord.service&quot; and &quot;journalctl -xe&quot; for details.</span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# </span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# supervisord -c /etc/supervisord.conf -n</span></span>
<span class="line"><span style="color:#A6ACCD;">Error: Invalid user name www in section &#39;program:v2board&#39; (file: &#39;/etc/supervisord.d/v2board.ini&#39;)</span></span>
<span class="line"><span style="color:#A6ACCD;">For help, use /usr/bin/supervisord -h</span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# sudo useradd -m -s /bin/bash www</span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# sudo passwd www</span></span>
<span class="line"><span style="color:#A6ACCD;">Changing password for user www.</span></span>
<span class="line"><span style="color:#A6ACCD;">New password: </span></span>
<span class="line"><span style="color:#A6ACCD;">Retype new password: </span></span>
<span class="line"><span style="color:#A6ACCD;">Sorry, passwords do not match.</span></span>
<span class="line"><span style="color:#A6ACCD;">New password: </span></span>
<span class="line"><span style="color:#A6ACCD;">Retype new password: </span></span>
<span class="line"><span style="color:#A6ACCD;">passwd: all authentication tokens updated successfully.</span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# sudo systemctl start supervisord</span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# sudo systemctl restart supervisord</span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# </span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]# sudo supervisorctl status</span></span>
<span class="line"><span style="color:#A6ACCD;">v2board:v2board_00               RUNNING   pid 15701, uptime 0:00:07</span></span>
<span class="line"><span style="color:#A6ACCD;">[root@iZj6c73ltaqggmig1fz8hqZ ~]#</span></span></code></pre></div>`,32),l=[n];function p(t,i,c,d,u,h){return a(),e("div",null,l)}const g=s(r,[["render",p]]);export{C as __pageData,g as default};
